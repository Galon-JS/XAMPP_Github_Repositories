<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button id="add">Add/Update Code</button>
    <button id="remove">Remove code</button>
    <button id="clear">Clear all</button>

    <script>
        let addButton = document.querySelector('#add');
        let removeButton = document.querySelector('#remove');
        let clearButton = document.querySelector('#clear');

        addButton.onclick = function () {
            sessionStorage.setItem('code', Math.random().toString(36).substring(7))
        }
        removeButton.onclick = function () {
            sessionStorage.removeItem('code')
        }
        clearButton.onclick = function () {
            sessionStorage.clear()
        }
        window.onstorage = function (event) {
            if (event.key === null) {
                console.log('Whole storage is cleared !');
                return
            }
            if (event.oldValue === null) {
                console.log('New value added to storage: ' + event.key + ' ' + event.newValue);
                return
            }
            if (event.newValue === null) {
                console.log('Value removed from storage: ' + event.key + ' ' + event.oldValue);
                return
            }
            console.log('Value with key: ' + event.key + ' updated. Old value: ' + event.oldValue + 'New value: ' + event.newValue);

        }

    </script>
</body>

</html>